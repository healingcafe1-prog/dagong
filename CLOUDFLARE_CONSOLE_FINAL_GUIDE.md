# 🎯 다공 프로덕션 DB 최종 업데이트 가이드

> **생성일**: 2026-02-19  
> **파일**: `/home/user/webapp/cloudflare_console_FINAL.sql` (281줄)  
> **인코딩**: UTF-8  
> **소요시간**: 약 3-5분

---

## 📊 업데이트 데이터 요약

### ✅ 기본 데이터
- **지역 (Regions)**: 17개
  - 차 생산지: 제주도, 하동, 김해, 광양, 보성
  - 공예 지역: 이천, 광주, 담양, 안동, 전주, 강진, 남원, 공주, 경주
  - 지역특산: 울산, 부산, 서울

- **카테고리 (Categories)**: 31개
  - 차류 6종: 녹차, 백차, 청차, 황차, 홍차, 발효차
  - 공예품 11종: 찻잔, 다관, 장식품, 다기세트, 도자기, 목공예, 금속공예, 한복공예, 가죽공예, 서예, 그림
  - 선물세트 8종: 선물세트, 고급선물세트, 명절선물세트, 개업선물세트, 혼례선물세트, 회갑선물세트, 돌잔치선물세트, 기업선물세트
  - 지역특산품 6종: 전통주, 농수산물, 가공식품, 건강식품, 생활용품, 문화상품

- **생산자 (Producers)**: 2개
  - 박수공 (제주 한라산 유기농 차 농원)
  - 제주 한라산 차농원

- **제품 (Products)**: 50개
  - 차류 18종 (녹차 3, 백차 3, 청차 3, 황차 3, 홍차 3, 발효차 3)
  - 공예품 15종 (찻잔 5, 다관 5, 다기세트 5)
  - 선물세트 8종
  - 지역특산품 9종

- **이벤트 (Events)**: 27개
  - 월별 이벤트 24개 (1월~12월)
  - 상시 이벤트 3개

- **체험 프로그램 (Experiences)**: 12개
  - 차밭 투어, 전통 다례 체험, 차 블렌딩 클래스
  - 도자기 만들기, 차 명상, 한국 전통 공예 체험
  - 계절별 차 체험, 차와 음식 페어링, 차 재배 체험
  - 차 역사 투어, 다도 워크숍, 차 예술 체험

### 🎓 교육 데이터 (신규 추가)

#### 교육 카테고리 (5개)
1. **다도교육** (최상위 카테고리)
2. **차공부** (하위 카테고리)
3. **공예공부** (하위 카테고리)
4. **다도교육** (하위 카테고리 - 구체적 다도 교육)
5. **명상교육** (하위 카테고리)

#### 교육 커리큘럼 (29개)

**차공부 (6개)**
1. 차의 역사 (90분, 초급) - 차의 기원과 세계 전파
2. 한국차의 역사 (120분, 중급) - 한국 차의 시대별 변천사
3. 6대 차류 (150분, 중급) - 발효도에 따른 차의 분류
4. 한국차의 종류 (120분, 중급) - 지역별 특색있는 한국차
5. 차의 이로운 점 (90분, 초급) - 과학적으로 입증된 차의 효능
6. 6대 차류 우리는 방법 (180분, 고급) - 차류별 최적의 우리기

**공예공부 (9개)**
1. 공예의 역사 (90분, 초급) - 한국 전통 공예의 기원과 발전
2. 한국공예의 시대별 변천사 (150분, 중급) - 시대별 공예 특징
3. 도자기의 제작 기법 (180분, 고급) - 전통 도자기 제작의 모든 것
4. 도자기의 활용법 (90분, 초급) - 일상에서 도자기 활용하기
5. 도자기의 이로운 점 (90분, 초급) - 도자기가 주는 혜택
6. 서예의 역사와 발전 (120분, 중급) - 한국 서예의 아름다움
7. 한국 전통미술과 민화 (90분, 중급) - 서민의 그림, 민화
8. 한복의 역사와 아름다움 (90분, 초급) - 전통 복식문화
9. 한지의 역사와 제조법 (120분, 중급) - 천년을 가는 종이

**다도교육 (7개)**
1. 다도의 의미 (120분, 초급) - 다도란 무엇인가
2. 다도의 역사와 시대적 변천사 (150분, 중급) - 한국 다도의 발전
3. 다도의 종류 (120분, 중급) - 전통 다례와 현대 다도
4. 다도와 명상의 효과 (90분, 초급) - 차와 명상이 주는 선물
5. 인성교육으로 다도 명상을 해야하는 이유 (150분, 중급) - 다도와 인성의 관계
6. 다도의 역사와 정신 (120분, 중급) - 다도의 철학과 실천
7. 다도교육의 이론과 실제 (150분, 고급) - 다도 교육 실습

**명상교육 (7개)**
1. 호흡 명상 (45분, 초급) - 호흡으로 시작하는 명상
2. 마음챙김 명상 (60분, 중급) - 현재를 살아가는 법
3. 차 명상 (90분, 중급) - 차를 마시며 명상하기
4. 요가와 명상 (75분, 중급) - 몸과 마음의 조화
5. 명상의 역사 (90분, 초급) - 동서양 명상의 흐름
6. 명상의 종류와 실천 (150분, 중급) - 다양한 명상법 체험
7. 명상의 정의와 원리 (60분, 초급) - 명상이란 무엇인가

---

## 🚀 Cloudflare Console 사용 방법

### 1단계: Cloudflare Dashboard 접속
1. 브라우저에서 https://dash.cloudflare.com/ 접속
2. 계정으로 로그인
3. 좌측 메뉴에서 **Workers & Pages** 클릭
4. **D1** 탭 선택
5. **webapp-production** 데이터베이스 클릭

### 2단계: Console 열기
1. 상단 탭에서 **Console** 클릭
2. SQL 쿼리 입력창이 나타남

### 3단계: SQL 파일 복사
1. `/home/user/webapp/cloudflare_console_FINAL.sql` 파일 열기
2. **전체 내용 복사** (281줄 전체)
3. Cloudflare Console 입력창에 **붙여넣기**

### 4단계: 실행
1. **Execute** 버튼 클릭
2. 처리 완료까지 대기 (약 1-2분)
3. 성공 메시지 확인

---

## 🔍 업데이트 확인

### API 엔드포인트로 확인

```bash
# 제품 확인 (50개 예상)
curl https://dagong-bi1.pages.dev/api/products | jq '. | length'

# 이벤트 확인 (27개 예상)
curl https://dagong-bi1.pages.dev/api/events | jq '. | length'

# 체험 프로그램 확인 (12개 예상)
curl https://dagong-bi1.pages.dev/api/experiences | jq '. | length'

# 교육 카테고리 확인 (5개 예상)
curl https://dagong-bi1.pages.dev/api/education/categories | jq '. | length'

# 교육 커리큘럼 확인 (29개 예상)
curl https://dagong-bi1.pages.dev/api/education/curriculum | jq '. | length'

# 차공부 커리큘럼 확인 (6개 예상)
curl https://dagong-bi1.pages.dev/api/education/curriculum?category_id=2 | jq '. | length'

# 공예공부 커리큘럼 확인 (9개 예상)
curl https://dagong-bi1.pages.dev/api/education/curriculum?category_id=3 | jq '. | length'

# 다도교육 커리큘럼 확인 (7개 예상)
curl https://dagong-bi1.pages.dev/api/education/curriculum?category_id=4 | jq '. | length'

# 명상교육 커리큘럼 확인 (7개 예상)
curl https://dagong-bi1.pages.dev/api/education/curriculum?category_id=5 | jq '. | length'
```

### 브라우저로 확인

- **제품 페이지**: https://dagong-bi1.pages.dev/products
- **차 제품**: https://dagong-bi1.pages.dev/products?type=tea
- **공예품**: https://dagong-bi1.pages.dev/products?type=craft
- **선물세트**: https://dagong-bi1.pages.dev/products?type=gift
- **지역특산품**: https://dagong-bi1.pages.dev/products?type=local
- **이벤트**: https://dagong-bi1.pages.dev/events
- **체험 프로그램**: https://dagong-bi1.pages.dev/experiences
- **교육 프로그램**: https://dagong-bi1.pages.dev/education (교육 카테고리 + 커리큘럼)

---

## ⚠️ 주의사항

### 실행 전
1. **데이터 백업**: 기존 데이터가 있다면 백업 권장
2. **전체 복사**: 281줄 전체를 복사해야 함 (일부만 복사하면 오류)
3. **네트워크**: 안정적인 인터넷 연결 필요

### 실행 중
1. **완료 대기**: Execute 후 완료까지 기다리기 (새로고침 금지)
2. **브라우저**: 탭 닫지 말고 대기

### 실행 후
1. **오류 확인**: SQL 오류 메시지 확인
2. **데이터 검증**: API 엔드포인트로 데이터 개수 확인
3. **브라우저 테스트**: 실제 페이지에서 데이터 표시 확인

---

## 🐛 문제 해결

### SQL 오류 발생 시
- **원인**: 테이블이 존재하지 않거나 컬럼 구조가 다름
- **해결**: 마이그레이션 먼저 실행 필요
  ```bash
  cd /home/user/webapp
  npx wrangler d1 migrations apply webapp-production
  ```

### 데이터가 표시되지 않을 때
- **원인**: 일부만 삽입되었거나 API 오류
- **해결**: 
  1. Console에서 `SELECT COUNT(*) FROM products;` 실행하여 개수 확인
  2. API 엔드포인트로 직접 확인
  3. 브라우저 캐시 삭제 후 재확인

### 일부 데이터만 삽입될 때
- **원인**: SQL 중간에 오류 발생
- **해결**:
  1. 오류 메시지 확인
  2. 해당 부분만 수정하여 재실행
  3. 또는 전체 삭제 후 재실행

---

## 📝 체크리스트

### 실행 전
- [ ] Cloudflare Dashboard 로그인 완료
- [ ] D1 → webapp-production 접속 완료
- [ ] Console 탭 열림 확인
- [ ] SQL 파일 전체 복사 준비

### 실행
- [ ] SQL 파일 전체 붙여넣기 (281줄)
- [ ] Execute 버튼 클릭
- [ ] 처리 완료 대기 (1-2분)
- [ ] 성공 메시지 확인

### 실행 후
- [ ] 제품 50개 확인
- [ ] 이벤트 27개 확인
- [ ] 체험 프로그램 12개 확인
- [ ] 교육 카테고리 5개 확인
- [ ] 교육 커리큘럼 29개 확인
- [ ] 웹사이트에서 정상 표시 확인

---

## 📊 최종 데이터 집계

| 카테고리 | 데이터 개수 | 상태 |
|---------|------------|------|
| 지역 (Regions) | 17 | ✅ |
| 카테고리 (Categories) | 31 | ✅ |
| 생산자 (Producers) | 2 | ✅ |
| 제품 (Products) | 50 | ✅ |
| 이벤트 (Events) | 27 | ✅ |
| 체험 (Experiences) | 12 | ✅ |
| **교육 카테고리** | **5** | **🆕** |
| **교육 커리큘럼** | **29** | **🆕** |
| **- 차공부** | **6** | **🆕** |
| **- 공예공부** | **9** | **🆕** |
| **- 다도교육** | **7** | **🆕** |
| **- 명상교육** | **7** | **🆕** |

---

## 💡 다음 단계

### 완료 후 작업
1. ✅ 프로덕션 DB 업데이트 (이 가이드)
2. 🔄 Google Play Store 앱 배포
   - 가이드: `/home/user/webapp/ANDROID_BUILD_GUIDE.md`
   - 예상 소요: 빌드 1-2시간 + 검토 3-5일
3. 🌐 커스텀 도메인 연결 (선택사항)
   - 도메인: `dagong.co.kr`
   - 가이드: `/home/user/webapp/CUSTOM_DOMAIN_GUIDE.md`

---

## 📞 도움이 필요하신가요?

추가 질문이나 문제가 발생하면 알려주세요!

**생성 날짜**: 2026-02-19  
**파일 위치**: `/home/user/webapp/cloudflare_console_FINAL.sql`  
**가이드 위치**: `/home/user/webapp/CLOUDFLARE_CONSOLE_FINAL_GUIDE.md`
