// 다국어 지원 시스템
const translations = {
  ko: {
    // 사이트 정보
    siteName: "다공",
    siteDescription: "차와 공예의 직거래 플랫폼",
    
    // 네비게이션
    nav: {
      teaDirect: "차 직거래",
      craft: "공예품",
      giftSet: "선물세트",
      localProducts: "지역특산물",
      regions: "지역별 보기",
      experiences: "체험·교육",
      education: "다도교육",
      educationCurriculum: "교육 커리큘럼",
      educationApply: "교육 신청",
      educationStatus: "교육 현황",
      events: "이벤트",
      login: "로그인",
      logout: "로그아웃",
      mypage: "마이페이지"
    },
    
    // 공통
    common: {
      all: "전체",
      search: "검색",
      loading: "로딩 중...",
      save: "저장",
      cancel: "취소",
      edit: "수정",
      delete: "삭제",
      register: "등록",
      view: "보기",
      more: "더보기",
      price: "가격",
      discount: "할인",
      shipping: "배송비",
      origin: "원산지",
      weight: "중량/용량",
      stock: "재고",
      sold: "매진"
    },
    
    // 홈
    home: {
      hero: "한국의 차와 공예, 생산자와 직접 만나다",
      monthlyEvent: "이달의 이벤트",
      featured: "추천 상품",
      teaRegions: "차 산지 바로가기",
      craftRegions: "공예 산지 바로가기",
      experienceCTA: "체험 프로그램"
    },
    
    // 상품
    product: {
      list: "상품 목록",
      detail: "상품 상세",
      originalPrice: "정가",
      salePrice: "판매가",
      discountRate: "할인율",
      savings: "직거래 특별가! {amount}원 절약",
      popular: "인기 상품",
      available: "구매 가능",
      outOfStock: "품절",
      viewCount: "조회수"
    },
    
    // 체험
    experience: {
      title: "체험 & 교육 프로그램",
      teaCeremony: "다도교육",
      teaExperience: "차체험",
      craftWorkshop: "공예 체험",
      farmTour: "농장 투어",
      workshopVisit: "공방 견학",
      duration: "소요 시간",
      participants: "참가 인원"
    },
    
    // 교육
    education: {
      curriculum: "교육 커리큘럼",
      teaStudy: "차공부",
      craftStudy: "공예공부",
      apply: "교육 신청하기",
      beginner: "입문",
      intermediate: "중급",
      advanced: "고급"
    },
    
    // 지역
    region: {
      teaRegions: "차 산지",
      craftRegions: "공예 산지",
      attractions: "가볼 만한 곳",
      restaurants: "맛집",
      workshops: "공방"
    },
    
    // 생산자
    producer: {
      profile: "생산자 프로필",
      story: "생산자 이야기",
      products: "생산 상품",
      contact: "연락처"
    }
  },
  
  en: {
    // Site Info
    siteName: "Korean Tea & Craft",
    siteDescription: "Direct trade platform for Korean traditional tea and crafts",
    
    // Navigation
    nav: {
      teaDirect: "Tea Direct",
      craft: "Crafts",
      giftSet: "Gift Sets",
      localProducts: "Local Products",
      regions: "By Region",
      experiences: "Experience",
      education: "Tea Education",
      educationCurriculum: "Curriculum",
      educationApply: "Apply",
      educationStatus: "Status",
      events: "Events",
      login: "Login",
      logout: "Logout",
      mypage: "My Page"
    },
    
    // Common
    common: {
      all: "All",
      search: "Search",
      loading: "Loading...",
      save: "Save",
      cancel: "Cancel",
      edit: "Edit",
      delete: "Delete",
      register: "Register",
      view: "View",
      more: "More",
      price: "Price",
      discount: "Discount",
      shipping: "Shipping",
      origin: "Origin",
      weight: "Weight",
      stock: "Stock",
      sold: "Sold Out"
    },
    
    // Home
    home: {
      hero: "Experience Korean Tea & Craft, Meet Producers Directly",
      monthlyEvent: "Monthly Event",
      featured: "Featured Products",
      teaRegions: "Tea Regions",
      craftRegions: "Craft Regions",
      experienceCTA: "Experience Programs"
    },
    
    // Product
    product: {
      list: "Products",
      detail: "Product Details",
      originalPrice: "Original Price",
      salePrice: "Sale Price",
      discountRate: "Discount",
      savings: "Direct trade! Save {amount}",
      popular: "Popular",
      available: "Available",
      outOfStock: "Out of Stock",
      viewCount: "Views"
    },
    
    // Experience
    experience: {
      title: "Experience & Education Programs",
      teaCeremony: "Tea Ceremony",
      teaExperience: "Tea Experience",
      craftWorkshop: "Craft Workshop",
      farmTour: "Farm Tour",
      workshopVisit: "Workshop Visit",
      duration: "Duration",
      participants: "Participants"
    },
    
    // Education
    education: {
      curriculum: "Curriculum",
      teaStudy: "Tea Study",
      craftStudy: "Craft Study",
      apply: "Apply for Education",
      beginner: "Beginner",
      intermediate: "Intermediate",
      advanced: "Advanced"
    },
    
    // Region
    region: {
      teaRegions: "Tea Regions",
      craftRegions: "Craft Regions",
      attractions: "Attractions",
      restaurants: "Restaurants",
      workshops: "Workshops"
    },
    
    // Producer
    producer: {
      profile: "Producer Profile",
      story: "Producer Story",
      products: "Products",
      contact: "Contact"
    }
  },
  
  zh: {
    // 网站信息
    siteName: "韩国茶工艺",
    siteDescription: "韩国传统茶和工艺品生产者直销平台",
    
    // 导航
    nav: {
      teaDirect: "茶叶直销",
      craft: "工艺品",
      giftSet: "礼品套装",
      localProducts: "地方特产",
      regions: "按地区",
      experiences: "体验教育",
      education: "茶道教育",
      educationCurriculum: "课程",
      educationApply: "申请",
      educationStatus: "状态",
      events: "活动",
      login: "登录",
      logout: "退出",
      mypage: "我的页面"
    },
    
    // 常用
    common: {
      all: "全部",
      search: "搜索",
      loading: "加载中...",
      save: "保存",
      cancel: "取消",
      edit: "编辑",
      delete: "删除",
      register: "注册",
      view: "查看",
      more: "更多",
      price: "价格",
      discount: "折扣",
      shipping: "运费",
      origin: "产地",
      weight: "重量",
      stock: "库存",
      sold: "售罄"
    },
    
    // 首页
    home: {
      hero: "韩国茶与工艺，与生产者直接见面",
      monthlyEvent: "本月活动",
      featured: "推荐商品",
      teaRegions: "茶叶产地",
      craftRegions: "工艺产地",
      experienceCTA: "体验项目"
    },
    
    // 商品
    product: {
      list: "商品列表",
      detail: "商品详情",
      originalPrice: "原价",
      salePrice: "售价",
      discountRate: "折扣率",
      savings: "直销特价！节省{amount}元",
      popular: "热门商品",
      available: "可购买",
      outOfStock: "售罄",
      viewCount: "浏览次数"
    },
    
    // 体验
    experience: {
      title: "体验与教育项目",
      teaCeremony: "茶道教育",
      teaExperience: "茶体验",
      craftWorkshop: "工艺体验",
      farmTour: "农场参观",
      workshopVisit: "工坊参观",
      duration: "所需时间",
      participants: "参与人数"
    },
    
    // 教育
    education: {
      curriculum: "教育课程",
      teaStudy: "茶学习",
      craftStudy: "工艺学习",
      apply: "申请教育",
      beginner: "入门",
      intermediate: "中级",
      advanced: "高级"
    },
    
    // 地区
    region: {
      teaRegions: "茶叶产地",
      craftRegions: "工艺产地",
      attractions: "景点",
      restaurants: "餐厅",
      workshops: "工坊"
    },
    
    // 生产者
    producer: {
      profile: "生产者简介",
      story: "生产者故事",
      products: "产品",
      contact: "联系方式"
    }
  },
  
  ja: {
    // サイト情報
    siteName: "韓国茶工芸",
    siteDescription: "韓国の伝統茶と工芸品の産地直送プラットフォーム",
    
    // ナビゲーション
    nav: {
      teaDirect: "お茶直取引",
      craft: "工芸品",
      giftSet: "ギフトセット",
      localProducts: "地域特産品",
      regions: "地域別",
      experiences: "体験・教育",
      education: "茶道教育",
      educationCurriculum: "カリキュラム",
      educationApply: "申込",
      educationStatus: "状況",
      events: "イベント",
      login: "ログイン",
      logout: "ログアウト",
      mypage: "マイページ"
    },
    
    // 共通
    common: {
      all: "全て",
      search: "検索",
      loading: "読み込み中...",
      save: "保存",
      cancel: "キャンセル",
      edit: "編集",
      delete: "削除",
      register: "登録",
      view: "表示",
      more: "もっと見る",
      price: "価格",
      discount: "割引",
      shipping: "送料",
      origin: "産地",
      weight: "重量",
      stock: "在庫",
      sold: "売り切れ"
    },
    
    // ホーム
    home: {
      hero: "韓国のお茶と工芸、生産者と直接出会う",
      monthlyEvent: "今月のイベント",
      featured: "おすすめ商品",
      teaRegions: "茶産地",
      craftRegions: "工芸産地",
      experienceCTA: "体験プログラム"
    },
    
    // 商品
    product: {
      list: "商品一覧",
      detail: "商品詳細",
      originalPrice: "定価",
      salePrice: "販売価格",
      discountRate: "割引率",
      savings: "産地直送特価！{amount}円お得",
      popular: "人気商品",
      available: "購入可能",
      outOfStock: "売り切れ",
      viewCount: "閲覧数"
    },
    
    // 体験
    experience: {
      title: "体験・教育プログラム",
      teaCeremony: "茶道教育",
      teaExperience: "お茶体験",
      craftWorkshop: "工芸体験",
      farmTour: "農場ツアー",
      workshopVisit: "工房見学",
      duration: "所要時間",
      participants: "参加人数"
    },
    
    // 教育
    education: {
      curriculum: "教育カリキュラム",
      teaStudy: "茶の勉強",
      craftStudy: "工芸の勉強",
      apply: "教育申込",
      beginner: "初級",
      intermediate: "中級",
      advanced: "上級"
    },
    
    // 地域
    region: {
      teaRegions: "茶産地",
      craftRegions: "工芸産地",
      attractions: "観光スポット",
      restaurants: "レストラン",
      workshops: "工房"
    },
    
    // 生産者
    producer: {
      profile: "生産者プロフィール",
      story: "生産者ストーリー",
      products: "生産品",
      contact: "連絡先"
    }
  }
};

// 현재 언어
let currentLang = localStorage.getItem('language') || 'ko';

// 언어 변경 함수
function setLanguage(lang) {
  if (!translations[lang]) {
    console.warn(`Language ${lang} not supported, falling back to Korean`);
    lang = 'ko';
  }
  currentLang = lang;
  localStorage.setItem('language', lang);
  
  // HTML lang 속성 변경
  document.documentElement.lang = lang;
  
  // 페이지 새로고침으로 언어 적용
  location.reload();
}

// 번역 함수
function t(key) {
  const keys = key.split('.');
  let value = translations[currentLang];
  
  for (const k of keys) {
    if (value && typeof value === 'object') {
      value = value[k];
    } else {
      return key; // 번역이 없으면 키 반환
    }
  }
  
  return value || key;
}

// 변수 치환 함수
function t_replace(key, replacements) {
  let text = t(key);
  for (const [placeholder, value] of Object.entries(replacements)) {
    text = text.replace(`{${placeholder}}`, value);
  }
  return text;
}

// 현재 언어 가져오기
function getCurrentLanguage() {
  return currentLang;
}

// Export
window.i18n = {
  t,
  t_replace,
  setLanguage,
  getCurrentLanguage,
  translations
};
